tosca_definitions_version: tosca_simple_yaml_1_0

imports:
  - indigo_basic_types: https://raw.githubusercontent.com/AkumuYuma/tosca-types/main/tosca_types/base/basic_types.yaml
  # https://github.com/indigo-paas/tosca-types/raw/main/tosca_types/base/basic_types.yaml
  # https://baltig.infn.it/infn-cloud/tosca-types/-/raw/master/tosca_types/base/basic_types.yaml
metadata:
  template_author: Emanuele-Fiorente
  template_name: starting_script_type
  template_version: 1.0.0

# Nota che nei basic_types non c'è nessuna implementazione per artefatti con estensione .sh quindi devi scriverla per farla funzionare. 
# Comunque durante il deployment non riesce ad eseguire lo script sh, si lamenta perché vuole un file yaml. Forse questo dipende da Ansible
# che immagino sia già installato di default sui nodi di tipo indigo.Compute
artifact_types:
  tosca.artifacts.Implementation.YAML:
    derived_from: tosca.artifacts.Implementation
    description: YAML Ansible recipe artifact
    mime_type: text/yaml
    file_ext: [ yaml, yml ]

#   tosca.artifacts.Implementation.Bash:
#       derived_from: tosca.artifacts.Implementation
#       description: Script artifact for the Unix Bash shell
#       mime_type: application/x-sh
#       file_ext: [ sh ]

node_types: 
  tosca.nodes.test.ScriptCompute: 
    derived_from: tosca.nodes.SoftwareComponent 
    interfaces: 
      Standard: 
        start: https://raw.githubusercontent.com/AkumuYuma/tosca-types/test_preliminare/artifacts/test_scripts/download_example.yml

